(this["webpackJsonpdd-character-sheet"]=this["webpackJsonpdd-character-sheet"]||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){},109:function(e,t,n){},121:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return ae}));var c=n(5),a=n(0),s=n(30),i=n.n(s),r=(n(104),n(105),n(106),n(14)),o=n(140),l=n.p+"static/media/logo.6ce24c58.svg";function u(){return Object(c.jsx)(o.a,{bg:"dark",variant:"dark",children:Object(c.jsxs)(o.a.Brand,{href:"/",children:[Object(c.jsx)("img",{alt:"",src:l,width:"30",height:"30",className:"d-inline-block align-top"})," D&D 5E Companion"]})})}var d=n(38),j=n(9),p=(n(109),n(88)),b=n.n(p),h=n(98);var g=n(31),O=n(32),f={local:{dd5eApi:"https://www.dnd5eapi.co",iconFinderApiKey:"wzxyevdss2iN8pz9B0ijlCTYPt59G37Hgen4u5NbneMjgRIHnVSItDNpvOMdE5wR"}},x=["acid","bludgeoning","cold","fire","force","lightning","necrotic","piercing","poison","psychic","radiant","slashing","thunder"].join("|"),m=n(97),v=["death"].concat(Object(m.a)(["charisma","constitution","dexterity","intelligence","strength","wisdom"])).join("|"),S=["charisma","constitution","dexterity","intelligence","strength","wisdom"].join("|"),_=n(51),y=n.n(_),w=[{re:/(?<!_)(?:(\d{1,2})?d\d{1,3})(?!_)/gi,options:{tag:"b"},examples:"1d10, 4d4, etc."},{re:/(?<!_)(?:AC\s[1-9]\d?|AC)(?!_)/g,options:{tag:"b"},examples:"AC 20, AC, AC 2"},{re:new RegExp("(?<!_)(?:(".concat(x,")\\s(damage(')?(s)?)?)(?!_)"),"gi"),options:{tag:"b"},examples:"acid damage"},{re:new RegExp("(?<!_)(?:((".concat(v,")\\s)?saving\\sthrow(s)?)(?!_)"),"gi"),options:{tag:"b"},examples:"death saving throws, charisma saving throw, etc."},{re:new RegExp("(?<!_)".concat(new Array(100).fill(0).map((function(e,t){return y()(t)})).join("|"),"(\\slevel(\\sor\\s(higher|lower))?)?(?!_)"),"gi"),options:{tag:"b"},examples:"death saving throws, charisma saving throw, etc."},{re:new RegExp("(?<!_)(?:(?:(?:range(?:d)?|melee)\\s)?spell\\sattack)(?!_)","gi"),options:{tag:"b"},examples:"ranged spell attack, spell attack, etc."},{re:new RegExp("(?<!_)(?:(ranged|melee)\\sattack(s)?)(?!_)","gi"),options:{tag:"b"},examples:"ranged spell attack, spell attack, etc."},{re:/(?<!_)(?:((?:[0-9]|[1-9][0-9]|100)\s)?(hit point(?:s)?))(?!_)/gi,options:{tag:"b"},examples:"10 hit points, hit point/s, etc."},{re:new RegExp("(?<!_)(?:(".concat(S,")(\\sof\\s(?:[0-9]|[1-9][0-9]|100)\\s\\(\\+(\\d{1,3})\\)|score)?)(?!_)"),"gi"),options:{tag:"b"},examples:"10 hit points, hit point/s, etc."},{re:new RegExp("(?<!_)(?:(".concat(S,")\\sscore(s)?)(?!_)"),"gi"),options:{tag:"b"},examples:"10 hit points, hit point/s, etc."},{re:/(?<!_)(?:(-)?(\d{1,6})(\s|-)?)((foot|feet|day(s)?|week(s)?|year(s)?|inch(es)?|yard(s)?|minute(s)?|second(s)?|hour(s)?|or\s(more|less|lower))(-radius)?)?(?!_)/gi,options:{tag:"b"},examples:"10 hit points, hit point/s, etc."},{re:/(?<!_)(?:attack\sbonus(')?)(?!_)/gi,options:{tag:"b"},examples:"10 hit points, hit point/s, etc."},{re:/(?<!_)(?:(spellcasting)\sability\smodifier(\s\+\syour\sproficiency\sbonus)?)(?!_)/gi,options:{tag:"b"},examples:"10 hit points, hit point/s, etc."},{re:new RegExp("(?<!_)(?:attack\\sroll(s)?)(?!_)","gi"),options:{tag:"b"},examples:"attack roll/s"}],T=function(){function e(){Object(g.a)(this,e),this.baseApiUrl=void 0,this.baseApiUrl=f.local.dd5eApi}return Object(O.a)(e,[{key:"getSpellList",value:function(){return this.fetchData("/api/spells")}},{key:"getSpell",value:function(e){return this.fetchData(e)}},{key:"getMagicSchools",value:function(){return this.fetchData("/api/magic-schools")}},{key:"fetchData",value:function(e){return fetch("".concat(this.baseApiUrl).concat(e)).then((function(e){return e.json()}))}}]),e}(),E=n(89),k=function(){function e(){Object(g.a)(this,e)}return Object(O.a)(e,[{key:"processText",value:function(e){var t=e.split(" ").length;return[1,2].indexOf(t)>=0?Object(c.jsx)("span",{children:Object(c.jsx)("b",{children:"".concat(e.replace(".",""))})}):this.parseToReactElement(e)}},{key:"determineSpecialTextBlocks",value:function(e){var t=e;return w.forEach((function(e){t=t.replaceAll(e.re,(function(e){return"_".concat(e,"_")}))})),t}},{key:"parseToReactElement",value:function(e){var t=this.determineSpecialTextBlocks(e).split("_").map((function(e){var t,n=Object(E.a)(w);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.re.test(e))return Object(c.jsx)(K,{subText:e,tag:a.options.tag})}}catch(s){n.e(s)}finally{n.f()}return Object(c.jsx)("span",{children:e})}));return Object(c.jsx)(c.Fragment,{children:t})}}]),e}();function C(e){var t=e.placeholderText,n=e.searchOptions,s=e.suggestionKey,i=e.handleSelect,r=Object(a.useState)([]),o=Object(j.a)(r,2),l=o[0],u=o[1],p=Object(a.useState)(""),g=Object(j.a)(p,2),O=g[0],f=g[1],x=function(e){var t=e.haystack,n=e.valueToMatch,c=e.keys,s=Object(a.useState)([]),i=Object(j.a)(s,2),r=i[0],o=i[1];return Object(a.useEffect)((function(){var e=new h.a(t,c,{sort:!0});o(e.search(n))}),[n]),r}(Object(d.a)(Object(d.a)({},n),{},{valueToMatch:O})),m={placeholder:t,value:O,onChange:function(e,t){var n=t.newValue;f(n)}};return Object(c.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(c.jsx)(b.a,{suggestions:l,onSuggestionsFetchRequested:function(){u(x)},onSuggestionsClearRequested:function(){u([])},getSuggestionValue:function(e){return e[s]},renderSuggestion:function(e){return Object(c.jsx)("div",{onClick:function(){return i(e)},onTouchEnd:function(){return i(e)},children:e[s]})},inputProps:m,multiSection:!1})})}var R=n(143);function A(e){var t=e.spell,n=e.spellSelected,s=function(e){var t=Object(a.useState)("bg-white"),n=Object(j.a)(t,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){var t,n;s("bg-".concat(null===e||void 0===e||null===(t=e.school)||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase())||!1)}),[e]),{backgroundColor:c,setBackgroundColor:s}}(t).backgroundColor,i=new k,r=t?"d-block":"d-none",o=(null===t||void 0===t?void 0:t.desc.map((function(e){return i.processText(e)})))||[],l=(null===o||void 0===o?void 0:o.shift())||"",u=t&&t.ritual?" (ritual)":"",d=function(e){return e?e.level>0?"".concat(y()(null===e||void 0===e?void 0:e.level),"-level"):"Cantrip":""}(t),p=t?"".concat(d," ").concat(t.school.name).concat(u):"";return Object(c.jsx)(R.a,{className:"".concat(r," mx-3 mt-2 w-100"),children:"d-block"===r&&Object(c.jsxs)(R.a.Body,{children:[Object(c.jsxs)("div",{style:{marginLeft:"-1.25rem",marginRight:"-1.25rem",marginTop:"-1.25rem",paddingTop:"1.25rem",paddingBottom:"1.25rem",paddingLeft:"1.25rem",paddingRight:"1.25rem"},className:"".concat(s),children:[Object(c.jsx)(R.a.Title,{children:(null===t||void 0===t?void 0:t.name)||""}),Object(c.jsx)(R.a.Subtitle,{className:"mb-2",children:p})]}),Object(c.jsx)(D,{castingTime:(null===t||void 0===t?void 0:t.casting_time)||"",range:(null===t||void 0===t?void 0:t.range)||"",components:(null===t||void 0===t?void 0:t.components)||[],duration:(null===t||void 0===t?void 0:t.duration)||"",school:(null===t||void 0===t?void 0:t.school.name)||""}),Object(c.jsx)(R.a.Text,{className:"text-justify",children:l}),o.length?Object(c.jsx)(P,{handleSelected:n,text:o}):null]})})}var N=n(96),L=n(141);function P(e){var t=e.text,n=e.handleSelected,s=Object(a.useState)(!1),i=Object(j.a)(s,2),r=i[0],o=i[1];Object(a.useEffect)((function(){o(!1)}),[n]);var l=t.map((function(e){return t=e,Object(c.jsx)(R.a.Text,{className:"text-justify",children:t},Object(L.a)());var t}));return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(N.a,{in:r,children:Object(c.jsx)("div",{className:"mb-0",id:"example-collapse-text",children:l})}),Object(c.jsx)("div",{className:"d-flex justify-content-end",children:Object(c.jsx)("button",{className:"text-justify mt-3 text-muted anchorButton cursorHover",onClick:function(){return o(!r)},"aria-controls":"example-collapse-text","aria-expanded":r,children:Object(c.jsx)("span",{children:r?"Hide":"Read more"})})})]})}function D(e){var t=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(""),r=Object(j.a)(i,2),o=r[0],l=r[1],u=Object(a.useState)([]),d=Object(j.a)(u,2),p=d[0],b=d[1],h=Object(a.useState)(""),g=Object(j.a)(h,2),O=g[0],f=g[1],x=Object(a.useState)(""),m=Object(j.a)(x,2),v=m[0],S=m[1],_=Object(a.useState)(""),y=Object(j.a)(_,2),w=y[0],T=y[1];return Object(a.useEffect)((function(){e.school&&(s(e.castingTime),l(e.range),b(e.components),f(e.duration),S(e.school),T(""))}),[e]),{castingTime:c,range:o,components:p,duration:O,school:v,imageUrl:w}}(e),n=B(t);return Object(c.jsx)(H,{headings:["Casting Time","Components","Duration","Range","School"],tableContent:n})}var B=function(e){return[{text:e.castingTime},{text:e.components.toString()},{text:e.duration},{text:e.range},{text:e.school}]},F=n(135),I=n(142);function H(e){var t=e.headings.map((function(e){return Object(c.jsx)("th",{children:I.a(e)},Object(L.a)())})),n=e.tableContent.map((function(e){return Object(c.jsx)("td",{children:e.text},Object(L.a)())}));return Object(c.jsxs)(F.a,{bordered:!0,striped:!0,children:[Object(c.jsx)("thead",{children:Object(c.jsx)("tr",{children:t})}),Object(c.jsx)("tbody",{children:Object(c.jsx)("tr",{children:n})})]})}function K(e){var t=e.subText,n=e.tag;return Object(c.jsx)("span",{children:function(){if("b"===n)return Object(c.jsx)("b",{style:{fontSize:"1.1rem"},children:t})}()},Object(L.a)())}n(121);var M=n(136),U=n(137),V=n(138),z=n(139);function W(){var e=Object(a.useState)({index:"acid-arrow",name:"Acid Arrow",url:"/api/spells/acid-arrow"}),t=Object(j.a)(e,2),n=t[0],s=t[1],i=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),i=Object(j.a)(s,2),r=i[0],o=i[1],l=Object(a.useState)(""),u=Object(j.a)(l,2),d=u[0],p=u[1],b=new T;return Object(a.useEffect)((function(){o(!0),b.getSpellList().then((function(e){c(e.results)})).catch((function(e){return p(e.message)})).finally((function(){return o(!1)}))}),[]),{spellList:n,isSpellListLoading:r,spellListError:d}}(),r=i.spellList,o=i.isSpellListLoading,l=(i.spellListError,function(e){var t=Object(a.useState)(),n=Object(j.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(!1),r=Object(j.a)(i,2),o=r[0],l=r[1],u=Object(a.useState)(""),d=Object(j.a)(u,2),p=d[0],b=d[1],h=new T;return Object(a.useEffect)((function(){e&&(l(!0),h.getSpell(e.url).then((function(e){s(e)})).catch((function(e){return b(e.message)})).finally((function(){l(!1)})))}),[e]),{spell:c,isSpellLoading:o,spellError:p}}(n)),u=l.spell,d=l.isSpellLoading,p=(l.spellError,{suggestionKey:"name",placeholderText:"Start by typing a spell...",searchOptions:{haystack:r,keys:["name","url"]},handleSelect:function(e){s(e)}});return Object(c.jsxs)(M.a,{fluid:!0,children:[Object(c.jsx)(U.a,{children:Object(c.jsxs)(V.a,{className:"mt-3",children:[Object(c.jsx)("h3",{children:"Spell Search"}),Object(c.jsx)(C,{searchOptions:p.searchOptions,placeholderText:p.placeholderText,suggestionKey:p.suggestionKey,handleSelect:p.handleSelect}),o||d&&Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(z.a,{animation:"border",role:"status",className:"mt-3 mr-3",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})})})]})}),Object(c.jsx)(U.a,{children:Object(c.jsx)(V.a,{className:"mt-3 d-flex justify-content-center",children:Object(c.jsx)(A,{spell:u,spellSelected:n})})})]})}var G=function(){return n(122).config(),Object(c.jsx)(r.c,{children:Object(c.jsx)(r.a,{exact:!0,path:"/",render:function(){return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(u,{}),Object(c.jsx)(W,{})]})}})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,144)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))},q=n(43),J=n(93),Q=n(33),X=n(73),Z=n(65),$=n(91),ee=n(92),te=Object(J.a)();var ne=n(66),ce=n(70),ae=function(e){return Object(Q.createStore)((t=te,Object(Q.combineReducers)({router:Object(Z.a)(t)})),e,Object(ee.composeWithDevTools)(Object(Q.applyMiddleware)(Object(X.a)(te),$.a)));var t}();new ce.ApolloClient({uri:Object({NODE_ENV:"production",PUBLIC_URL:"/dd-character-sheet",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENV:"local",REACT_APP_ICON_FINDER_API_KEY:"wzxyevdss2iN8pz9B0ijlCTYPt59G37Hgen4u5NbneMjgRIHnVSItDNpvOMdE5wR"}).REACT_APP_GRAPHQL_API,cache:new ce.InMemoryCache});i.a.render(Object(c.jsx)(q.a,{store:ae,children:Object(c.jsx)(ne.a,{children:Object(c.jsx)(r.a,{component:G})})}),document.getElementById("root")),Y()}},[[131,1,2]]]);
//# sourceMappingURL=main.1b026411.chunk.js.map