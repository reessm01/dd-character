(this["webpackJsonpdd-character-sheet"]=this["webpackJsonpdd-character-sheet"]||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){},107:function(e,t,n){},119:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return te}));var c=n(5),a=n(0),r=n(30),s=n.n(r),i=(n(102),n(103),n(104),n(14)),o=n(138),l=n.p+"static/media/logo.6ce24c58.svg";function u(){return Object(c.jsx)(o.a,{bg:"dark",variant:"dark",children:Object(c.jsxs)(o.a.Brand,{href:"/",children:[Object(c.jsx)("img",{alt:"",src:l,width:"30",height:"30",className:"d-inline-block align-top"})," D&D 5E Companion"]})})}var d=n(37),j=n(13),b=(n(107),n(86)),h=n.n(b),O=n(96);var p=n(31),f=n(32),x={local:{dd5eApi:"https://www.dnd5eapi.co",iconFinderApiKey:"wzxyevdss2iN8pz9B0ijlCTYPt59G37Hgen4u5NbneMjgRIHnVSItDNpvOMdE5wR"}},g=["acid","bludgeoning","cold","fire","force","lightning","necrotic","piercing","poison","psychic","radiant","slashing","thunder"].join("|");var v=[{re:/(?<!_)(?:AC\\s[1-9]\d?|\d{1,3}d\d{1,3})(?!_)/gi,options:{tag:"b"},description:"bold only",examples:"AC 20, AC 5, 1d10, 4d4, etc."},{re:new RegExp("(?<!_)(?:(".concat(g,")\\sdamage)(?!_)"),"gi"),options:{tag:"b"},description:"bold & color",examples:"acid damage"}],m=function(){function e(){Object(p.a)(this,e),this.baseApiUrl=void 0,this.baseApiUrl=x.local.dd5eApi}return Object(f.a)(e,[{key:"getSpellList",value:function(e){var t=e.setIsLoading,n=e.setError,c=e.setData;this.fetchData("".concat(this.baseApiUrl).concat("/api/spells")).then((function(e){c(e.results)})).catch((function(e){n(e.message)})).finally((function(){t(!1)}))}},{key:"getSpell",value:function(e){var t=e.setIsLoading,n=e.setError,c=e.setData,a=e.urlRef;this.fetchData("".concat(this.baseApiUrl).concat(a)).then((function(e){c(e)})).catch((function(e){return n(e.message)})).finally((function(){return t(!1)}))}},{key:"fetchData",value:function(e){return fetch(e).then((function(e){return e.json()}))}}]),e}(),S=n(87),y=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,[{key:"processText",value:function(e){var t=e.text,n=e.currentBackgroundColor,a=e.setBackgroundColor,r=t.split(" ").length;return[1,2].indexOf(r)>=0?Object(c.jsx)("span",{children:Object(c.jsx)("b",{children:"".concat(t.replace(".",""))})}):this.parseToReactElement(t,n,a)}},{key:"determineSpecialTextBlocks",value:function(e){var t=e;return v.forEach((function(e){t=t.replaceAll(e.re,(function(e){return"_".concat(e,"_")}))})),t}},{key:"parseToReactElement",value:function(e,t,n){var a=this.determineSpecialTextBlocks(e).split("_").map((function(e){var t,n=Object(S.a)(v);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.re.test(e))return Object(c.jsx)(B,{subText:e,tag:a.options.tag})}}catch(r){n.e(r)}finally{n.f()}return Object(c.jsx)("span",{children:e})}));return Object(c.jsx)(c.Fragment,{children:a})}}]),e}();function T(e){var t=e.placeholderText,n=e.searchOptions,r=e.suggestionKey,s=e.handleSelect,i=Object(a.useState)([]),o=Object(j.a)(i,2),l=o[0],u=o[1],b=Object(a.useState)(""),p=Object(j.a)(b,2),f=p[0],x=p[1],g=function(e){var t=e.haystack,n=e.valueToMatch,c=e.keys,r=Object(a.useState)([]),s=Object(j.a)(r,2),i=s[0],o=s[1];return Object(a.useEffect)((function(){var e=new O.a(t,c,{sort:!0});o(e.search(n))}),[n]),i}(Object(d.a)(Object(d.a)({},n),{},{valueToMatch:f})),v={placeholder:t,value:f,onChange:function(e,t){var n=t.newValue;x(n)}};return Object(c.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(c.jsx)(h.a,{suggestions:l,onSuggestionsFetchRequested:function(){u(g)},onSuggestionsClearRequested:function(){u([])},getSuggestionValue:function(e){return e[r]},renderSuggestion:function(e){return Object(c.jsx)("div",{onClick:function(){return s(e)},onTouchEnd:function(){return s(e)},children:e[r]})},inputProps:v,multiSection:!1})})}var E=n(141),C=n(88),_=n.n(C);function A(e){var t=e.spell,n=e.spellSelected,r=Object(a.useState)("white"),s=Object(j.a)(r,2),i=s[0],o=s[1],l=new y,u=t?"d-block":"d-none",d=(null===t||void 0===t?void 0:t.desc.map((function(e){return l.processText({text:e,currentBackgroundColor:i,setBackgroundColor:o})})))||[],b=(null===d||void 0===d?void 0:d.shift())||"",h=t&&t.ritual?" (ritual)":"",O=function(e){return e?e.level>0?"".concat(_()(null===e||void 0===e?void 0:e.level),"-level"):"Cantrip":""}(t),p=t?"".concat(O," ").concat(t.school.name).concat(h):"";return Object(c.jsx)(E.a,{className:"".concat(u," mx-3 mt-2 w-100"),children:"d-block"===u&&Object(c.jsxs)(E.a.Body,{className:"".concat(i),children:[Object(c.jsx)(E.a.Title,{children:(null===t||void 0===t?void 0:t.name)||""}),Object(c.jsx)(E.a.Subtitle,{className:"mb-2",children:p}),Object(c.jsx)(R,{castingTime:(null===t||void 0===t?void 0:t.casting_time)||"",range:(null===t||void 0===t?void 0:t.range)||"",components:(null===t||void 0===t?void 0:t.components)||[],duration:(null===t||void 0===t?void 0:t.duration)||"",school:(null===t||void 0===t?void 0:t.school.name)||""}),Object(c.jsx)(E.a.Text,{className:"text-justify",children:b}),d.length?Object(c.jsx)(w,{handleSelected:n,text:d}):null]})})}var N=n(95),k=n(139);function w(e){var t=e.text,n=e.handleSelected,r=Object(a.useState)(!1),s=Object(j.a)(r,2),i=s[0],o=s[1];Object(a.useEffect)((function(){o(!1)}),[n]);var l=t.map((function(e){return t=e,Object(c.jsx)(E.a.Text,{className:"text-justify",children:t},Object(k.a)());var t}));return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(N.a,{in:i,children:Object(c.jsx)("div",{className:"mb-0",id:"example-collapse-text",children:l})}),Object(c.jsx)("div",{className:"d-flex justify-content-end",children:Object(c.jsx)("button",{className:"text-justify mt-3 text-muted anchorButton cursorHover",onClick:function(){return o(!i)},"aria-controls":"example-collapse-text","aria-expanded":i,children:Object(c.jsx)("span",{children:i?"Hide":"Read more"})})})]})}function R(e){var t=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),i=Object(j.a)(s,2),o=i[0],l=i[1],u=Object(a.useState)([]),d=Object(j.a)(u,2),b=d[0],h=d[1],O=Object(a.useState)(""),p=Object(j.a)(O,2),f=p[0],x=p[1],g=Object(a.useState)(""),v=Object(j.a)(g,2),m=v[0],S=v[1],y=Object(a.useState)(""),T=Object(j.a)(y,2),E=T[0],C=T[1];return Object(a.useEffect)((function(){e.school&&(r(e.castingTime),l(e.range),h(e.components),x(e.duration),S(e.school),C(""))}),[e]),{castingTime:c,range:o,components:b,duration:f,school:m,imageUrl:E}}(e),n=L(t);return Object(c.jsx)(I,{headings:["Casting Time","Components","Duration","Range","School"],tableContent:n})}var L=function(e){return[{text:e.castingTime},{text:e.components.toString()},{text:e.duration},{text:e.range},{text:e.school}]},D=n(133),P=n(140);function I(e){var t=e.headings.map((function(e){return Object(c.jsx)("th",{children:P.a(e)},Object(k.a)())})),n=e.tableContent.map((function(e){return Object(c.jsx)("td",{children:e.text},Object(k.a)())}));return Object(c.jsxs)(D.a,{bordered:!0,striped:!0,children:[Object(c.jsx)("thead",{children:Object(c.jsx)("tr",{children:t})}),Object(c.jsx)("tbody",{children:Object(c.jsx)("tr",{children:n})})]})}function B(e){var t=e.subText,n=e.tag;return Object(c.jsx)("span",{children:function(){if("b"===n)return Object(c.jsx)("b",{style:{fontSize:"1.1rem"},children:t})}()},Object(k.a)())}n(119);var F=n(134),H=n(135),K=n(136),M=n(137);function U(){var e=Object(a.useState)({index:"acid-arrow",name:"Acid Arrow",url:"/api/spells/acid-arrow"}),t=Object(j.a)(e,2),n=t[0],r=t[1],s=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(j.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(""),u=Object(j.a)(l,2),d=u[0],b=u[1],h=new m;return Object(a.useEffect)((function(){o(!0);var e={setIsLoading:o,setError:b,setData:c};h.getSpellList(e)}),[]),{spellList:n,isSpellListLoading:i,spellListError:d}}(),i=s.spellList,o=s.isSpellListLoading,l=(s.spellListError,function(e){var t=Object(a.useState)(),n=Object(j.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!1),i=Object(j.a)(s,2),o=i[0],l=i[1],u=Object(a.useState)(""),d=Object(j.a)(u,2),b=d[0],h=d[1],O=new m;return Object(a.useEffect)((function(){if(e){l(!0);var t={setIsLoading:l,setError:h,setData:r,urlRef:e.url};O.getSpell(t)}}),[e]),{spell:c,isSpellLoading:o,spellError:b}}(n)),u=l.spell,d=l.isSpellLoading,b=(l.spellError,{suggestionKey:"name",placeholderText:"Start by typing a spell...",searchOptions:{haystack:i,keys:["name","url"]},handleSelect:function(e){r(e)}});return Object(c.jsxs)(F.a,{fluid:!0,children:[Object(c.jsx)(H.a,{children:Object(c.jsxs)(K.a,{className:"mt-3",children:[Object(c.jsx)("h3",{children:"Spell Search"}),Object(c.jsx)(T,{searchOptions:b.searchOptions,placeholderText:b.placeholderText,suggestionKey:b.suggestionKey,handleSelect:b.handleSelect}),o||d&&Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(M.a,{animation:"border",role:"status",className:"mt-3 mr-3",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})})})]})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(K.a,{className:"mt-3 d-flex justify-content-center",children:Object(c.jsx)(A,{spell:u,spellSelected:n})})})]})}var V=function(){return n(120).config(),Object(c.jsx)(i.c,{children:Object(c.jsx)(i.a,{exact:!0,path:"/",render:function(){return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(u,{}),Object(c.jsx)(U,{})]})}})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,142)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},W=n(41),G=n(92),Y=n(33),q=n(71),J=n(63),Q=n(90),X=n(91),Z=Object(G.a)();var $=n(64),ee=n(68),te=function(e){return Object(Y.createStore)((t=Z,Object(Y.combineReducers)({router:Object(J.a)(t)})),e,Object(X.composeWithDevTools)(Object(Y.applyMiddleware)(Object(q.a)(Z),Q.a)));var t}();new ee.ApolloClient({uri:Object({NODE_ENV:"production",PUBLIC_URL:"/dd-character-sheet",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENV:"local",REACT_APP_ICON_FINDER_API_KEY:"wzxyevdss2iN8pz9B0ijlCTYPt59G37Hgen4u5NbneMjgRIHnVSItDNpvOMdE5wR"}).REACT_APP_GRAPHQL_API,cache:new ee.InMemoryCache});s.a.render(Object(c.jsx)(W.a,{store:te,children:Object(c.jsx)($.a,{children:Object(c.jsx)(i.a,{component:V})})}),document.getElementById("root")),z()}},[[129,1,2]]]);
//# sourceMappingURL=main.44e1f5b2.chunk.js.map