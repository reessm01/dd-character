(this["webpackJsonpdd-character-sheet"]=this["webpackJsonpdd-character-sheet"]||[]).push([[0],{101:function(e,t,c){},113:function(e,t,c){},114:function(e,t,c){},124:function(e,t,c){"use strict";c.r(t),c.d(t,"store",(function(){return V}));var n=c(5),a=c(0),s=c(28),r=c.n(s),i=(c(96),c(97),c(98),c(48)),l=c(131),o=c.p+"static/media/logo.6ce24c58.svg";function u(){return Object(n.jsx)(l.a,{bg:"dark",variant:"dark",children:Object(n.jsxs)(l.a.Brand,{href:"/",children:[Object(n.jsx)("img",{alt:"",src:o,width:"30",height:"30",className:"d-inline-block align-top"})," D&D 5E Companion"]})})}var d=c(62),j=c(14),b=(c(101),c(80)),h=c.n(b),O=c(89);var f=c(32),p=c(33),x={local:{dd5eApi:"https://www.dnd5eapi.co"}},v=function(){function e(){Object(f.a)(this,e),this.baseApiUrl=void 0,this.baseApiUrl=x.local.dd5eApi}return Object(p.a)(e,[{key:"getSpellList",value:function(e){var t=e.setIsLoading,c=e.setError,n=e.setData;this.fetchData("".concat(this.baseApiUrl).concat("/api/spells")).then((function(e){n(e.results)})).catch((function(e){c(e.message)})).finally((function(){t(!1)}))}},{key:"getSpell",value:function(e){var t=e.setIsLoading,c=e.setError,n=e.setData,a=e.urlRef;this.fetchData("".concat(this.baseApiUrl).concat(a)).then((function(e){n(e)})).catch((function(e){return c(e.message)})).finally((function(){return t(!1)}))}},{key:"fetchData",value:function(e){return fetch(e).then((function(e){return e.json()}))}}]),e}();function g(e){var t=e.placeholderText,c=e.searchOptions,s=e.suggestionKey,r=e.handleSelect,i=Object(a.useState)([]),l=Object(j.a)(i,2),o=l[0],u=l[1],b=Object(a.useState)(""),f=Object(j.a)(b,2),p=f[0],x=f[1],v=function(e){var t=e.haystack,c=e.valueToMatch,n=e.keys,s=Object(a.useState)([]),r=Object(j.a)(s,2),i=r[0],l=r[1];return Object(a.useEffect)((function(){var e=new O.a(t,n,{sort:!0});l(e.search(c))}),[c]),i}(Object(d.a)(Object(d.a)({},c),{},{valueToMatch:p})),g={placeholder:t,value:p,onChange:function(e,t){var c=t.newValue;x(c)}};return Object(n.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(n.jsx)(h.a,{suggestions:o,onSuggestionsFetchRequested:function(){u(v)},onSuggestionsClearRequested:function(){u([])},getSuggestionValue:function(e){return e[s]},renderSuggestion:function(e){return Object(n.jsx)("div",{onClick:function(){return r(e)},onTouchEnd:function(){return r(e)},children:e[s]})},inputProps:g,multiSection:!1})})}var m=c(133),S=c(81),y=c.n(S);function E(e){var t=e.spell,c=t?"d-block":"d-none",a=(null===t||void 0===t?void 0:t.desc[0])||"",s=(null===t||void 0===t?void 0:t.desc.slice(1))||[],r=t&&t.ritual?" (ritual)":"",i=t?"".concat(y()(null===t||void 0===t?void 0:t.level),"-level ").concat(t.school.name).concat(r):"";return Object(n.jsx)(m.a,{className:"".concat(c," mx-3 mt-2 w-100"),children:"d-block"===c&&Object(n.jsxs)(m.a.Body,{children:[Object(n.jsx)(m.a.Title,{children:(null===t||void 0===t?void 0:t.name)||""}),Object(n.jsx)(m.a.Subtitle,{className:"mb-2 text-muted",children:i}),Object(n.jsx)(m.a.Text,{className:"text-justify",children:a}),s.length?Object(n.jsx)(A,{text:s}):null]})})}c(113);var T=c(88),L=c(132);function A(e){var t=e.text,c=Object(a.useState)(!1),s=Object(j.a)(c,2),r=s[0],i=s[1],l=t.map((function(e){return t=e,Object(n.jsx)(m.a.Text,{className:"text-justify",children:t},Object(L.a)());var t}));return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(T.a,{in:r,children:Object(n.jsx)("div",{className:"mb-0",id:"example-collapse-text",children:l})}),Object(n.jsx)("div",{className:"d-flex justify-content-end",children:Object(n.jsx)("a",{className:"text-justify mt-3 text-muted cursor-hover",onClick:function(){return i(!r)},"aria-controls":"example-collapse-text","aria-expanded":r,children:r?"Hide":"Read more"})})]})}c(114);var w=c(128),k=c(129),C=c(130);function D(){var e=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(!1),r=Object(j.a)(s,2),i=r[0],l=r[1],o=Object(a.useState)(""),u=Object(j.a)(o,2),d=u[0],b=u[1],h=new v;return Object(a.useEffect)((function(){l(!0);var e={setIsLoading:l,setError:b,setData:n};h.getSpellList(e)}),[]),{spellList:c,isSpellListLoading:i,spellListError:d}}(),t=e.spellList,c=(e.isSpellListLoading,e.spellListError,Object(a.useState)({index:"acid-arrow",name:"Acid Arrow",url:"/api/spells/acid-arrow"})),s=Object(j.a)(c,2),r=s[0],i=s[1],l=function(e){var t=Object(a.useState)(),c=Object(j.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(!1),i=Object(j.a)(r,2),l=i[0],o=i[1],u=Object(a.useState)(""),d=Object(j.a)(u,2),b=d[0],h=d[1],O=new v;return Object(a.useEffect)((function(){if(e){o(!0);var t={setIsLoading:o,setError:h,setData:s,urlRef:e.url};O.getSpell(t)}}),[e]),{spell:n,isSpellLoading:l,spellError:b}}(r),o=l.spell,u=(l.isSpellLoading,l.spellError,{suggestionKey:"name",placeholderText:"Start by typing a spell...",searchOptions:{haystack:t,keys:["name","url"]},handleSelect:function(e){i(e)}});return Object(n.jsxs)(w.a,{fluid:!0,children:[Object(n.jsx)(k.a,{children:Object(n.jsxs)(C.a,{className:"mt-3",children:[Object(n.jsx)("h3",{children:"Spell Search"}),Object(n.jsx)(g,{searchOptions:u.searchOptions,placeholderText:u.placeholderText,suggestionKey:u.suggestionKey,handleSelect:u.handleSelect})]})}),Object(n.jsx)(k.a,{children:Object(n.jsx)(C.a,{className:"mt-3 d-flex justify-content-center",children:Object(n.jsx)(E,{spell:o})})})]})}var N=function(){return c(115).config(),Object(n.jsx)(i.c,{children:Object(n.jsx)(i.a,{exact:!0,path:"/",render:function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(u,{}),Object(n.jsx)(D,{})]})}})})},_=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,134)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))},P=c(39),R=c(85),I=c(29),F=c(65),K=c(36),U=c(83),B=c(84),H=Object(R.a)();var M=c(49),V=function(e){return Object(I.createStore)((t=H,Object(I.combineReducers)({router:Object(K.b)(t)})),e,Object(B.composeWithDevTools)(Object(I.applyMiddleware)(Object(F.a)(H),U.a)));var t}(),W=new M.ApolloClient({uri:Object({NODE_ENV:"production",PUBLIC_URL:"/dd-character-sheet",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENV:"local"}).REACT_APP_GRAPHQL_API,cache:new M.InMemoryCache});r.a.render(Object(n.jsx)(M.ApolloProvider,{client:W,children:Object(n.jsx)(P.a,{store:V,children:Object(n.jsx)(K.a,{history:H,children:Object(n.jsx)(i.a,{component:N})})})}),document.getElementById("root")),_()},96:function(e,t,c){},97:function(e,t,c){}},[[124,1,2]]]);
//# sourceMappingURL=main.144edfde.chunk.js.map